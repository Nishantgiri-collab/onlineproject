{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<style>
    body {
        background: url("{% static 'image/loginbg.jpg' %}") no-repeat center center fixed;
        background-size: cover;
    }
    .login-container {
        display: flex;
        justify-content: left;
        align-items: center;
        min-height: 70vh;
    }
    .login-box {
        background: rgba(255, 255, 255, 0.95);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0px 4px 15px rgba(0,0,0,0.2);
        width: 350px;
        text-align: center;
    }
    .login-box .form-control {
        border-radius: 25px;
        padding: 12px 15px;
    }
    .login-box button {
        border-radius: 25px;
        padding: 12px;
        font-weight: bold;
        background: #0d6efd;
        border: none;
    }
    .login-box button:hover {
        background: #0b5ed7;
    }
</style>

 <!-- Show Django Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

<div class="login-container">
    <div class="login-box">

        <h3 class="mb-4">Login</h3>

        <form method="POST">
        {% csrf_token %}
        <!-- Username -->
            <div class="mb-3 text-start">
            <label for="id_email" class="form-label fw-bold">Email</label>
        {% render_field form.email class="form-control" placeholder="email" %}<br>
            </div>
        <!-- Password -->
<div class="mb-3 text-start">
    <label for="id_password" class="form-label fw-bold">Password</label>
    <div class="input-group">
        {% render_field form.password class="form-control rounded-start-pill" placeholder="Password" id="id_password" %}
        <button type="button" class="btn btn-outline-primary rounded-end-pill" id="togglePassword">
            <i class="bi bi-eye"></i>
        </button>
    </div>
</div>
        <!-- Forgot password -->
        <!---<a href="#" class="forgot-link">Forgot your password?</a>--->

        <!-- Login button -->
        <button type="submit" class="btn-login" >Log in</button>
        </form>

        <p class="mt-3">Don't have an account? <a href="{% url 'registration' %}">Create one</a></p>
    </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const togglePassword = document.getElementById("togglePassword");
    const passwordField = document.getElementById("id_password");
    const icon = togglePassword.querySelector("i");

    togglePassword.addEventListener("click", function () {
        const type = passwordField.type === "password" ? "text" : "password";
        passwordField.type = type;

        // Toggle icon
        icon.classList.toggle("bi-eye");
        icon.classList.toggle("bi-eye-slash");
    });
});
</script>
{% endblock %}
